<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Library Seat Display</title>
  <style>
    body { background: #f7f8fa; font-family: Arial, sans-serif; text-align: center; }
    h1 { font-size: 2.2em; margin-top: 30px; }
    .legend { display: flex; justify-content: center; gap: 20px; margin: 20px 0; }
    .legend div { padding: 10px 15px; border-radius: 8px; color: white; font-weight: bold; }
    .vacant { background: #28a745; }
    .occupied { background: #c0392b; }
    .break { background: #f1c40f; color: #000; }
    .not-logged { background: #e67e22; }

    .seats { display: flex; justify-content: center; gap: 50px; margin-top: 30px; }
    .seat { width: 200px; height: 200px; border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: center; font-weight: bold; font-size: 1.3em; color: white; }
    .green { background: #28a745; }
    .yellow { background: #f1c40f; color: #000; }
    .orange { background: #e67e22; }
  </style>
</head>
<body>
  <h1>Library Seat Display</h1>
  <div class="legend">
    <div class="vacant">Vacant</div>
    <div class="occupied">Occupied (logged in)</div>
    <div class="break">Breaktime</div>
    <div class="not-logged">Occupied (not logged in)</div>
  </div>
  <div class="seats">
    <a href="seat1.html"><div id="seat1" class="seat green">Seat 1</div></a>
    <a href="seat2.html"><div id="seat2" class="seat green">Seat 2</div></a>
  </div>
  <p>Scan the QR on a seat to login or check seat page.</p>

  <script>
    async function updateSeats() {
      const res = await fetch('/status');
      const data = await res.json();

      for (const [id, seat] of Object.entries(data)) {
        const el = document.getElementById(id);
        el.className = `seat ${seat.status}`;
        el.textContent = `${id.replace('seat', 'Seat ')} ${seat.user ? seat.user : ''}`;
      }
    }

    setInterval(updateSeats, 1500);
    updateSeats();
  </script>
</body>
</html>





